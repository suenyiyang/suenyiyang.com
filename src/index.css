@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@plugin "@tailwindcss/typography";
@plugin "@iconify/tailwind4";

:root {
  view-transition-name: theme;
  --vt-x: 50%;
  --vt-y: 50%;
  --vt-radius: 150%;
}

::view-transition-old(theme),
::view-transition-new(theme) {
  animation: none;
}

::view-transition {
  background: transparent;
}

:root[data-theme-transition="to-light"]::view-transition-new(theme) {
  z-index: 1;
  clip-path: circle(0 at var(--vt-x) var(--vt-y));
  animation: theme-wipe-in 420ms ease-out forwards;
}

:root[data-theme-transition="to-dark"]::view-transition-old(theme) {
  z-index: 1;
  clip-path: circle(var(--vt-radius) at var(--vt-x) var(--vt-y));
  animation: theme-wipe-out 420ms ease-in forwards;
}

@keyframes theme-wipe-in {
  to {
    clip-path: circle(var(--vt-radius) at var(--vt-x) var(--vt-y));
  }
}

@keyframes theme-wipe-out {
  to {
    clip-path: circle(0 at var(--vt-x) var(--vt-y));
  }
}

@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(theme),
  ::view-transition-new(theme) {
    animation: none !important;
  }
}
